# 代码生成器需求文档

## 1. 文档引言

### 1.1 文档目的

本文档用于明确**代码生成器**的需求范围、功能细节、技术规范及非功能约束，为后续原型设计、开发编码、测试验收提供依据，确保开发成果符合预期目标。

### 1.2 需求范围

**技术栈边界**：基于已确定技术栈（Java、Spring Boot、MyBatis、Druid、MySQL、Vue3、TypeScript），不引入超出此范围的核心技术（扩展功能除外）。
**功能边界**：仅制作数据库配置、代码生成、代码存储核心功能以及下载功能，不做在线部署功能，不做登录等额外功能。
### 1.3 受众

- 开发人员：用于明确开发任务与技术实现标准
- 测试人员：自己自测时参考
- 个人复盘：后续回顾需求逻辑

## 2. 项目概述

### 2.1 产品定位

代码生成器是面向开发人员使用的代码生成工具，旨在减少重复劳动、提升开发效率，支持自定义配置以适配不同开发场景。

### 2.2 核心目标

- 代码生成器：实现多数据库表结构驱动的代码自动生成，支持自定义模板与生成规则。
- 易用性目标：通过可视化配置（无需写脚本），让非资深开发者10分钟内完成从“数据库连接”到“代码下载”的全流程。

## 3. 代码生成器需求

### 3.1 核心功能需求

| 需求 ID  |需求名称|需求描述|优先级（高 / 中 / 低）|
|--------|--|--|--|
| CG-001 |数据库连接配置|1. 支持多数据库类型选择：MySQL（版本范围）、PostgreSQL（版本范围），预留拓展接口（如 Oracle、SQL Server）<br/>2. 支持输入数据库连接信息：IP 地址、端口号、数据库名称、用户名、密码（密码加密存储，不明文展示）<br/>3. 支持 “测试连接” 功能，验证连接有效性后可保存连接配置（按 “数据库名称 + IP” 唯一标识）|高|
| CG-002 |表结构选择|1. 连接成功后，展示数据库下所有表列表（含表名称、表注释、字段数量）<br/>2. 支持单表 / 多表勾选（可通过搜索框按表名模糊搜索）<br/>3. 点击表名可预览表结构：字段名、字段类型、是否主键、是否非空、字段注释|高|
| CG-003 |生成参数配置|1. 前置包名配置：支持输入自定义包名（如[cn.com.web.wzy），后续生成的代码按 “包名 + 子模块” 组织（如实体类：包名.entity）<br/>2. 生成文件类型选择：必选：Java 实体类、MyBatis 映射文件（XML）。可选：MyBatis 接口（Mapper）、基础 Controller 接口（含 GET/POST/PUT/DELETE 基础方法）<br/>3. MyBatis 映射文件增强：支持选择 “生成简单增删改查 SQL”（如 selectByPrimaryKey、insert、updateByPrimaryKey、deleteByPrimaryKey）|高|
 | CG-004 |保存配置|保存是利用mysql进行存储，存储时需要提供配置名称|高|
| CG-005 |代码生成与下载|1. 点击 “生成” 按钮后，后台按配置规则生成代码，前端展示生成进度（如 “生成实体类：3/5”）<br/>2. 生成完成后，支持 “预览代码”（按文件类型分类展示，可复制单文件内容）<br/>3. 支持 “打包下载”：将所有生成文件按 “包名目录结构” 压缩为 ZIP 包，下载到本地|高|

### 3.2 技术实现需求

1. **后端**：

- 采用 Freemarker 模板引擎解析模板，封装 JDBC 工具类获取表结构元数据（字段名、类型映射关系：如 MySQL VARCHAR→Java String）
- 实现数据库类型拓展接口：新增数据库时仅需补充 “数据库驱动类、字段类型映射配置”，无需修改核心逻辑

1. **前端**：

- 使用 Vue3+TypeScript 实现可视化配置界面，采用 Element Plus 组件库（如表单、表格、弹窗）
- 实现包名输入校验（符合 Java 包名规范：字母、数字、下划线，首字符为字母）
- 支持生成进度实时更新（基于 WebSocket 或定时轮询）

### 3.3 非功能需求

- **性能**：单表生成代码响应时间≤3s，5 表批量生成≤10s
- **兼容性**：支持主流浏览器（Chrome 90+、Firefox 88+、Edge 90+）
- **易用性**：配置流程引导（如 “第一步：配置数据库→第二步：选择表→第三步：设置参数”），关键操作提供提示（如包名格式错误时实时提示）

### 3.4 扩展需求（V2 版本）

1. 支持 Swagger 接口文档自动生成：Controller 接口生成时可选择 “添加 Swagger 注解（@Api、@ApiOperation）”
2. 支持 Lombok 注解配置：实体类生成时可选择添加 Lombok 注解（@Data、@NoArgsConstructor、@AllArgsConstructor）
3. 优先级：低

### 3.5 原型关联

- 图 1：数据库连接配置界面：
![数据库连接配置](/images/数据库连接配置.png)
- 图 2：生成参数配置界面：
![生成参数配置](/images/生成参数配置.png)
## 4. 文档附录

### 4.1 术语定义

|术语|定义说明|
|--|--|
|Freemarker|一种模板引擎，用于生成动态文本（如代码、HTML），支持自定义模板语法|
|Druid|阿里巴巴开源的数据库连接池，支持 SQL 监控、慢查询统计、SQL 注入防护等功能|
|monaco-editor|微软开源的代码编辑器，支持多语言语法高亮、自动补全，常用于 Web 端代码编辑场景|

### 6.2 参考资料

1. Spring Boot 3.0 官方文档：[https://docs.spring.io/spring-boot/docs/current/reference/html/](https://docs.spring.io/spring-boot/docs/current/reference/html/)
2. Freemarker 官方文档：[https://freemarker.apache.org/docs/](https://freemarker.apache.org/docs/)
3. Druid 官方文档：[https://github.com/alibaba/druid/wiki](https://github.com/alibaba/druid/wiki)
4. 墨刀原型工具使用指南：[https://modao.cc/brand](https://modao.cc/brand)
5. 墨刀原型：https://modao.cc/proto/E2bzUOZtt1pp136d6OfILp/sharing?view_mode=read_only&screen=rbpUvBZAfTEjg16mI

### 6.3 版本历史

|版本|修订时间|修订内容|修订人|
|--|--|--|--|
|V1.0|2025年8月28日|初稿完成，完成代码生成器的基本内容和央视|wzy|
